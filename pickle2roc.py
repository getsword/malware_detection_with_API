import pickle
import matplotlib.pyplot as plt

# the file convert pickle to roc, pickle contains fpr(False Positive Rate), tpr(True Positive Rate), auc(Area Under the Curve)

def pickle2roc(path,labels,colors):
    fprs=[]
    tprs=[]
    aucs=[]
    for i in path:
        with open(i,'rb') as f:
            temp=pickle.load(f)
        fprs.append(temp[0])
        tprs.append(temp[1])
        aucs.append(temp[2])

    plt.figure()
    lw = 2

    for fpr,tpr, a, label, color in zip(fprs,tprs,aucs,labels,colors):
        plt.plot(fpr, tpr, color=color,
                 lw=lw, label='%s(area = %0.4f)' % (label,a))

    plt.xlim([-0.03, 0.6])
    plt.ylim([0.8, 1.01])
    plt.xlabel('False Positive Rate')
    plt.ylabel('True Positive Rate')
    plt.title('ROC of Ablation Study')
    plt.legend(loc="lower right")
    plt.savefig('roc.png')

if __name__=="__main__":
    # pickle2roc(["roc_final/tcn_roc_embed_3.pickle","roc_final/tcn_roc_embed_4.pickle","roc_final/tcn_roc_embed_5.pickle","roc_final/tcn_roc_embed_6.pickle"],
    #           ["K=3", "K=4", "K=5", "K=6"],
    #           ["deeppink", 'indigo', 'royalblue', 'turquoise'])
    pickle2roc(["roc_final/lstm_roc_embed_unlabel.pickle","roc_final/lstm_roc_embed_5.pickle",'roc_final/tcn_roc_embed_unlabel.pickle',"roc_final/tcn_roc_embed_5.pickle"],["TextCNN with raw API","TextCNN with augmented API","TCN-GRU with raw API","complete model"],["deeppink",'indigo','royalblue','turquoise'])