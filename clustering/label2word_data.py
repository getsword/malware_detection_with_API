import pathlib
import json

# 现在可以接受多个文件输入

NAME="_CLUSTER_3"

def label2word(source_path,target_path):
    target_path=pathlib.Path(target_path)

    if isinstance(source_path,str):
        source_path=pathlib.Path(source_path)
        text=[]
        with open(source_path,'r',encoding='utf-8') as f:
            for line in f.readlines():
                temp=json.loads(line)
                for i in range(len(temp['sequence'])):
                    temp['sequence'][i]=temp['sequence'][i].replace('Fake_', '')
                text.append(temp['sequence'])

        with open(target_path,'w',encoding='utf-8') as f:
            for t in text:
                f.write(' '.join(t))
                f.write('\n')
    else:
        text=[]
        for i in source_path:
            path = pathlib.Path(i)
            with open(path, 'r', encoding='utf-8') as f:
                for line in f.readlines():
                    temp = json.loads(line)
                    for i in range(len(temp['sequence'])):
                        temp['sequence'][i] = temp['sequence'][i].replace('Fake_', '')
                    text.append(temp['sequence'])

        with open(target_path, 'w', encoding='utf-8') as f:
            for t in text:
                f.write(' '.join(t))
                f.write('\n')



if __name__=="__main__":
    label2word(["labeled_data"+NAME+"/train/labeled_data.json","labeled_data"+NAME+"/test/labeled_data.json"],"../word2vec/native_embedding"+NAME+".txt")
